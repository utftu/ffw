# Неэффективные формы для React

Если в сервисе немного форм - вам повезло. Если нет - приятного прочтения.

### Существующие решения:
Раньше все ходили с бумбоксом на плече и использовали формы интегрированные со state manager-ом. Эти времена прошли и 
оставили нам твердую уверенность, что формы это что-то особенное и локальное, что не должно хранить данные в 
глобальном и по-хорошему не зависеть от конкретного state manager-a. Не будет рассуждать почему это хорошо, а посмотрим 
кто пришел на смену великому redux-form.

Решения, которые имеют больше всего звезд или у всех на слуху:
* formik
* react-hook-form

(субъективно)

Что с ними не так:

#### formik
Самое популярное решение и небезосновательно. Большую часть статьи будет уделено именно сравнению с ним. 
Не могу сказать о других разработчиков, но эта мое сердце он завоевал своей простой и безотказностью.
Все сделано максимально просто и максимально непроизводительно. При обновлении любого поля обновятся все компоненты 
которые используют formik. Кажется это стоит исправить

Pros:
* Удобное и интуитивно понятное api

Cons:
* Глобальные изменения и отсутствие механизма подписки на конкретное поле

#### react-hook-form
Относительная новая библиотека. В ней решена проблема глобального обновления подписанных компонентов, 
но привнесены другие проблемы:

Pros:
* Производительный механизм на определенное поле 

Cons:
* Использование stateless полей по средствам хранения в форме dom-представления поля, вместо его значения. 
Это решение довольно производительно, но при этом этот подход забирает контроль над данными.
* Неудобное api и плохая документация. Очень субъективный пункт, но можете попробовать подписаться на 
изменения свойства touched для конкретного поля. Довольно сомнительное удовольствие.

Попробуем взять все самое лучшее:
* Механизм подписок на конкретные поля. Это залог производительности формы
* Удобное api, по возможности максимально совместимую с formik-ом.

Механизм подписок
Как он должен выглядеть? Первые мысли что вот так:
```js
const [nameField] = useField('name')
```
Что может быть проще! Подписался на поле, положил в отдельную переменную, можно использовать.

Но часто нам нужно не только самое поле, но и его мета-информация и хелперы для обновления значения. 
У formik-a это выглядит так
```js
const [nameField, nameMeta, nameHelpers] = useField('name')
const [ageField, ageMeta, ageHelpers] = useField('age')
const [addressField, addressMeta, adressHelpers] = useField('address')
```
Довольно многословно, и это только для 3 полей! Значит можно подумать о другом api подписки. В своей практики я 
заметил что мне удобно работать с глобальным объектом формы, постоянно что-то нужно поменять в разных местах, 
и совсем не хочется запоминать где и что. Попробуем посмотреть как может выглядеть подписка в таком случае:
```js
const form = useForm('name', 'age', 'address')
```
Кажется получилось довольно лаконично
